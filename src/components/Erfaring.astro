---
import type { Jobb } from '../data/erfaring';
import VisMerKnapp from './VisMerKnapp.astro';
import TeknologiListe from './TeknologiListe.astro';

interface Props {
	jobber: Jobb[];
	antallSynlige?: number;
}

const { jobber, antallSynlige = 2 } = Astro.props;
const harSkjulteJobber = jobber.length > antallSynlige;
---

<section
	class="erfaring-container"
	data-vis-mer-container
	aria-labelledby="erfaring-heading"
>
	<h2 id="erfaring-heading">Erfaring</h2>
	<ol class="timeline" role="list">
		{
			jobber.map((jobb, index) => {
				const erSkjult = index >= antallSynlige;
				return (
					<li
						class={`job ${erSkjult ? 'skjult-element' : ''}`}
						style={erSkjult ? 'display: none;' : ''}
					>
						<div class="timeline-left">
							<p class="periode">{jobb.periode}</p>
						</div>
						<div class="timeline-center">
							<div class="timeline-dot" />
							<div class="timeline-line-bottom" />
						</div>
						<div class="timeline-right">
							<p class="periode">{jobb.periode}</p>
							<h3>{jobb.tittel}</h3>
							<p class="bedrift subtle">{jobb.bedrift}</p>
							<h4>Oppsummering:</h4>
							<ul>
								{jobb.beskrivelse.map((punkt) => (
									<li>{punkt}</li>
								))}
							</ul>
							<TeknologiListe teknologier={jobb.teknologier} />
						</div>
					</li>
				);
			})
		}
	</ol>
	{
		harSkjulteJobber && (
			<VisMerKnapp
				visMerTekst="Vis mer erfaring"
				visMindreTekst="Vis mindre erfaring"
				targetSelector=".skjult-element"
			/>
		)
	}
</section>

<style>
	@import './Erfaring.css';
</style>
