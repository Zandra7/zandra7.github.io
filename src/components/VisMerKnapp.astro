---
import Icon from './icons/Icon.astro';

interface Props {
	visMerTekst?: string;
	visMindreTekst?: string;
}

const { visMerTekst = 'Vis mer', visMindreTekst = 'Vis mindre' } = Astro.props;
---

<div class="vis-mer-container">
	<button class="vis-mer-knapp subtle" type="button">
		<Icon name="chevron-down" width={16} height={16} class="pil-ikon" />
		<span class="knapp-tekst vis-mer-tekst">{visMerTekst}</span>
		<span class="knapp-tekst vis-mindre-tekst" style="display: none;"
			>{visMindreTekst}</span
		>
	</button>
</div>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const buttons = document.querySelectorAll('.vis-mer-knapp');

		buttons.forEach((button) => {
			button.addEventListener('click', function () {
				const pilIkon = button.querySelector('.pil-ikon');
				const visMerTekst = button.querySelector(
					'.vis-mer-tekst'
				) as HTMLElement;
				const visMindreTekst = button.querySelector(
					'.vis-mindre-tekst'
				) as HTMLElement;

				pilIkon?.classList.toggle('rotert');

				if (visMerTekst && visMindreTekst) {
					if (visMerTekst.style.display === 'none') {
						visMerTekst.style.display = '';
						visMindreTekst.style.display = 'none';
					} else {
						visMerTekst.style.display = 'none';
						visMindreTekst.style.display = '';
					}
				}
			});
		});
	});
</script>

<style>
	@import './VisMerKnapp.css';
</style>
